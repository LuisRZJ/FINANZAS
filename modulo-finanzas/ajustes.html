<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTI - Gestor de Finanzas | Ajustes</title>
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" href="/pwa/logo-app.png">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="estilos.css">
    <script defer src="javascript.js"></script>
    <style>
        /* Estilos para reordenamiento visual */
        .drag-over { outline: 2px dashed rgba(37,99,235,0.4); transform: translateY(-2px); }
        .draggable-cat[draggable="true"], .draggable-sub[draggable="true"] { cursor: move; }
        /* Aumentar área táctil de botones */
        .move-up, .move-down { width: 34px; height: 34px; display: inline-flex; align-items: center; justify-content: center; }
    </style>
    <style>
        /* Usando la fuente Inter como predeterminada */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="text-gray-800 flex justify-center">

    <!-- Contenedor principal de la app -->
    <div class="w-full max-w-2xl bg-white shadow-lg relative min-h-screen">
        <!-- Contenido de la página con padding inferior para la barra de navegación -->
        <div class="p-4 sm:p-6 pb-44">

            <!-- Encabezado y Saludo -->
            <header class="mb-8 flex justify-between items-start">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Ajustes</h1>
                    <p class="text-gray-500">Personaliza tu experiencia y gestiona tus datos.</p>
                </div>

                <!-- Menú de 3 puntos -->
                <div class="relative group">
                    <button class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div class="absolute right-0 w-48 pt-2 z-20 hidden group-hover:block">
                        <div class="bg-white rounded-md shadow-xl py-1">
                            <a href="/index.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                Volver a inicio
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Sección de Apariencia -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Apariencia</h2>
                <p class="text-sm text-gray-500 mb-4">Elige el tema y color de la aplicación.</p>
                
                <!-- Selector de Tema -->
                <div class="theme-toggle-group bg-gray-100 p-1 rounded-lg flex items-center gap-1 text-sm font-medium" role="group" aria-label="Selector de tema">
                    <button type="button" class="theme-button w-full py-2 rounded-md transition" data-theme-option="light">Claro</button>
                    <button type="button" class="theme-button w-full py-2 rounded-md transition" data-theme-option="dark">Oscuro</button>
                    <button type="button" class="theme-button w-full py-2 rounded-md transition" data-theme-option="system">Sistema</button>
                </div>

                <!-- Selector de Color de Acento -->
                <div class="mt-6">
                    <h3 class="text-base font-medium text-gray-700 mb-3">Color de Acento</h3>
                    <div class="flex items-center gap-4">
                        <!-- Color por defecto: Índigo -->
                        <button type="button" title="Índigo" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="indigo" aria-pressed="true">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                        <!-- Otros Colores -->
                        <button type="button" title="Esmeralda" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="emerald" aria-pressed="false">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                        <button type="button" title="Rosa" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="rose" aria-pressed="false">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                        <button type="button" title="Naranja" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="orange" aria-pressed="false">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                        <button type="button" title="Cian" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="cyan" aria-pressed="false">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                        <button type="button" title="Pizarra" class="accent-option w-9 h-9 rounded-full transition-all" data-accent-option="slate" aria-pressed="false">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="accent-check text-white"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Sección de Preferencias -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Preferencias</h2>
                <p class="text-sm text-gray-500 mb-4">Ajusta el comportamiento de la plataforma a tu gusto.</p>
                
                <div class="bg-white rounded-lg border border-gray-200 divide-y divide-gray-200">
                    <!-- Opción de Moneda Predeterminada -->
                    <div class="flex justify-between items-center p-4">
                        <div>
                            <p class="font-medium text-gray-800">Moneda Predeterminada</p>
                            <p class="text-sm text-gray-500">La moneda principal para tus registros.</p>
                        </div>
                        <div class="relative">
                            <select id="defaultCurrencySelect" data-pref-key="defaultCurrency" class="appearance-none bg-gray-100 border border-gray-200 text-gray-800 font-semibold py-2 pl-3 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-indigo-500 cursor-pointer" aria-label="Moneda predeterminada">
                                <option value="USD">USD ($)</option>
                                <option value="MXN" selected>MXN ($)</option>
                                <option value="EUR">EUR (€)</option>
                                <option value="JPY">JPY (¥)</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                            </div>
                        </div>
                    </div>

                    <!-- Opción de Segunda Moneda -->
                    <div class="flex justify-between items-center p-4">
                        <div>
                            <p class="font-medium text-gray-800">Segunda Moneda</p>
                            <p class="text-sm text-gray-500">Para importes de referencia.</p>
                        </div>
                        <div class="relative">
                             <select id="secondaryCurrencySelect" data-pref-key="secondaryCurrency" class="appearance-none bg-gray-100 border border-gray-200 text-gray-800 font-semibold py-2 pl-3 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-indigo-500 cursor-pointer" aria-label="Segunda moneda">
                                <option value="USD" selected>USD ($)</option>
                                <option value="MXN">MXN ($)</option>
                                <option value="EUR">EUR (€)</option>
                                <option value="JPY">JPY (¥)</option>
                            </select>
                             <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Sección de Categorías -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Categorías</h2>
                <p class="text-sm text-gray-500 mb-4">Organiza tus ingresos y gastos para un mejor análisis.</p>

                <div class="bg-white rounded-lg border border-gray-200 p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                             <div class="p-2.5 bg-gray-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">Gestionar Categorías</p>
                                <p class="text-sm text-gray-500">Edita, crea o elimina categorías.</p>
                            </div>
                        </div>
                        <button id="openCategoriesModal" class="font-semibold text-sm bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">
                            Gestionar
                        </button>
                    </div>
                </div>
                <!-- Modal de gestión de categorías -->
                <div id="categoriesModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-40 flex items-center justify-center">
                    <div class="relative w-full max-w-2xl h-full md:h-auto md:max-h-[90vh] bg-white rounded-lg shadow-lg flex flex-col overflow-hidden">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50">
                            <h3 class="text-xl font-semibold text-gray-800">Gestión de Categorías</h3>
                            <button id="closeCategoriesModal" class="text-gray-500 hover:text-gray-700 p-2 rounded-full focus:outline-none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                            </button>
                        </div>
                        <!-- Body -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-6">
                            <!-- Listado de categorías -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-700 mb-2">Categorías de Ingresos</h4>
                                <ul id="incomeCategoriesList" class="space-y-2"></ul>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-gray-700 mb-2">Categorías de Gastos</h4>
                                <ul id="expenseCategoriesList" class="space-y-2"></ul>
                            </div>
                            <!-- Formulario de registro/edición -->
                            <div class="mt-6">
                                <h4 id="categoryFormTitle" class="text-lg font-semibold text-gray-700 mb-2">Agregar Nueva Categoría</h4>
                                <form id="categoryForm" class="space-y-4">
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <div class="flex-1">
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
                                            <select id="categoryType" name="type" class="w-full bg-gray-100 border border-gray-200 rounded-lg p-2" required>
                                                <option value="income">Ingreso</option>
                                                <option value="expense">Gasto</option>
                                            </select>
                                        </div>
                                        <div class="flex-1">
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                                            <input id="categoryName" name="name" type="text" class="w-full bg-gray-100 border border-gray-200 rounded-lg p-2" required maxlength="32" placeholder="Nombre de la categoría">
                                        </div>
                                    </div>
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <div class="flex-1">
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Color</label>
                                            <input id="categoryColor" name="color" type="color" class="w-12 h-10 p-0 border-0 bg-transparent" value="#2563eb">
                                        </div>
                                        <div class="flex-1">
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Icono</label>
                                            <input id="categoryIcon" name="icon" type="text" class="w-full bg-gray-100 border border-gray-200 rounded-lg p-2" maxlength="32" placeholder="Ej: fa-solid fa-wallet">
                                            <span class="text-xs text-gray-400">(Clase de FontAwesome)</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Subcategoría de</label>
                                        <select id="parentCategory" name="parent" class="w-full bg-gray-100 border border-gray-200 rounded-lg p-2">
                                            <option value="">Ninguna (Categoría principal)</option>
                                        </select>
                                    </div>
                                    <div class="flex gap-2">
                                        <button type="submit" class="bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition">Guardar</button>
                                        <button type="button" id="cancelEditCategory" class="bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition hidden">Cancelar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Sección de Presupuestos -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Presupuestos</h2>
                <p class="text-sm text-gray-500 mb-4">Define tus límites de gasto y planifica tus finanzas.</p>

                <div class="space-y-3">
                    <!-- Tarjeta para Gestionar Presupuestos -->
                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="p-2.5 bg-gray-100 rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><path d="M2 9a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V9z"></path><path d="M11 9V6a1 1 0 0 1 1-1h.5a2 2 0 0 0 0-4H12a5 5 0 0 0-5 5v3"></path><path d="M18 21a1.5 1.5 0 0 0 1.5-1.5v-1.5A1.5 1.5 0 0 0 18 16.5h-1.5v-3H18A1.5 1.5 0 0 0 19.5 12V9A1.5 1.5 0 0 0 18 7.5h-1.5v-3H18A1.5 1.5 0 0 0 19.5 3V1.5A1.5 1.5 0 0 0 18 .5h-1.5a2 2 0 0 0-2 2V3a1 1 0 0 0 1 1h1.5v3H15a1.5 1.5 0 0 0-1.5 1.5V12a1.5 1.5 0 0 0 1.5 1.5h1.5v3H15a1.5 1.5 0 0 0-1.5 1.5v1.5A1.5 1.5 0 0 0 15 21h1.5v2.5a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V21z"></path></svg>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Gestionar Presupuestos</p>
                                    <p class="text-sm text-gray-500">Crea y ajusta tus límites de gasto.</p>
                                </div>
                            </div>
                            <button id="openBudgetsModal" class="font-semibold text-sm bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">
                                Gestionar
                            </button>
                        </div>
                    </div>
                     <!-- Tarjeta para Calculadora de Presupuestos -->
                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="p-2.5 bg-gray-100 rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="16" y1="10" x2="12" y2="10"></line><line x1="16" y1="14" x2="12" y2="14"></line><line x1="16" y1="18" x2="12" y2="18"></line><line x1="10" y1="10" x2="8" y2="10"></line><line x1="10" y1="14" x2="8" y2="14"></line><line x1="10" y1="18" x2="8" y2="18"></line></svg>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Calculadora de Presupuestos</p>
                                    <p class="text-sm text-gray-500">Estima tus gastos y ahorros.</p>
                                </div>
                            </div>
                            <button onclick="window.location.href='calculadora-presupuesto.html'" class="font-semibold text-sm bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors cursor-pointer">
                                Abrir
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Sección de Ahorros -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Ahorros</h2>
                <p class="text-sm text-gray-500 mb-4">Crea metas y da seguimiento a tus ahorros.</p>
                <div class="bg-white rounded-lg border border-gray-200 p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="p-2.5 bg-gray-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><path d="M3.5 9.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"></path><path d="M19.5 9.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"></path><path d="M12 12a5 5 0 0 1 5 5v3H7v-3a5 5 0 0 1 5-5z"></path></svg>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">Gestionar Ahorros</p>
                                <p class="text-sm text-gray-500">Crea y da seguimiento a tus metas.</p>
                            </div>
                        </div>
                        <button id="openSavingsModal" class="font-semibold text-sm bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">
                            Gestionar
                        </button>
                    </div>
                </div>
            </section>

            <!-- Sección de Gestión de Datos -->
            <section class="mb-8">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Gestión de Datos</h2>
                <p class="text-sm text-gray-500 mb-4">Controla la información de IndexedDB almacenada en tu dispositivo.</p>
                
                <!-- Panel de control de datos -->
                <div class="bg-gray-50 border border-gray-200 rounded-xl p-5">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="p-2 bg-gray-200 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-800">Almacenamiento Local</p>
                            <p class="text-xs text-gray-500">Método: <span id="dataStorageMethod">IndexedDB</span></p>
                        </div>
                    </div>

                    <!-- Barra de Progreso de Almacenamiento -->
                    <div class="mb-4">
                        <div class="flex justify-between items-baseline mb-1">
                            <span class="text-sm font-medium text-gray-700">Espacio utilizado</span>
                            <span class="text-sm font-semibold text-indigo-600" id="dataUsageValue">0.00 MB</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-indigo-600 h-2.5 rounded-full" id="dataUsageBar" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- Detalles del Almacenamiento -->
                    <div class="grid grid-cols-2 gap-4 pt-2">
                        <div>
                            <p class="text-xs text-gray-500">Registros totales</p>
                            <p class="font-semibold text-gray-800" id="dataRecordsCount">0</p>
                        </div>
                         <div>
                            <p class="text-xs text-gray-500">Almacenamiento disponible</p>
                            <p class="font-semibold text-gray-800" id="dataAvailableValue">N/D</p>
                        </div>
                    </div>
                </div>

                <!-- Gestión de Datos -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-4">
                    <!-- Botón para descargar archivo local -->
                    <button id="downloadDataButton" class="flex items-center justify-center gap-2 w-full bg-indigo-600 text-white font-semibold p-3 rounded-lg hover:bg-indigo-700 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        Descargar JSON
                    </button>
                    <!-- Botón para respaldar datos en Discord -->
                    <button id="exportDataButton" class="flex items-center justify-center gap-2 w-full bg-indigo-50 text-indigo-700 font-semibold p-3 rounded-lg hover:bg-indigo-100 transition">
                        <i class="fa-brands fa-discord fa-lg"></i>
                        Respaldar en Discord
                    </button>
                    <!-- Botón para gestionar Webhook -->
                    <button id="openWebhookModal" class="flex items-center justify-center gap-2 w-full bg-gray-100 text-gray-700 font-semibold p-3 rounded-lg hover:bg-gray-200 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                        Configurar Webhook
                    </button>
                    <!-- Botón para importar datos -->
                    <button id="importDataButton" class="flex items-center justify-center gap-2 w-full bg-gray-100 text-gray-800 font-semibold p-3 rounded-lg hover:bg-gray-200 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                        Importar Datos
                    </button>
                    <input type="file" id="importDataInput" accept="application/json" class="hidden" />
                    <!-- Botón para eliminar datos -->
                    <button id="deleteDataButton" class="flex items-center justify-center gap-2 w-full bg-red-50 text-red-700 font-semibold p-3 rounded-lg hover:bg-red-100 transition sm:col-span-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        Eliminar Datos
                    </button>
                </div>
            </section>
            <div id="budgetsModal" class="fixed inset-0 z-50 hidden">
                <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
                <div class="relative w-full h-full sm:h-auto sm:max-w-xl mx-auto sm:mt-10 bg-white sm:rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-300">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-indigo-100 rounded-lg text-indigo-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 9a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V9z"></path><path d="M11 9V6a1 1 0 0 1 1-1h.5a2 2 0 0 0 0-4H12a5 5 0 0 0-5 5v3"></path><path d="M18 21a1.5 1.5 0 0 0 1.5-1.5v-1.5A1.5 1.5 0 0 0 18 16.5h-1.5v-3H18A1.5 1.5 0 0 0 19.5 12V9A1.5 1.5 0 0 0 18 7.5h-1.5v-3H18A1.5 1.5 0 0 0 19.5 3V1.5A1.5 1.5 0 0 0 18 .5h-1.5a2 2 0 0 0-2 2V3a1 1 0 0 0 1 1h1.5v3H15a1.5 1.5 0 0 0-1.5 1.5V12a1.5 1.5 0 0 0 1.5 1.5h1.5v3H15a1.5 1.5 0 0 0-1.5 1.5v1.5A1.5 1.5 0 0 0 15 21h1.5v2.5a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V21z"></path></svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 text-lg">Presupuesto mensual</h3>
                                <p class="text-[10px] text-gray-400 uppercase tracking-widest font-bold" id="budgetsModalSubtitle">RECURRE PARA FUTUROS MESES</p>
                            </div>
                        </div>
                        <button id="closeBudgetsModal" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>

                    <div class="flex-grow overflow-y-auto p-6 space-y-6 custom-scrollbar">
                        <div class="bg-gray-50 rounded-xl p-4 border border-gray-100 space-y-4">
                            <div class="grid grid-cols-2 gap-3">
                                <div class="space-y-1">
                                    <label class="text-xs font-semibold text-gray-500">Total mensual</label>
                                    <input id="budgetTotalAmount" type="number" inputmode="decimal" min="0" step="0.01" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="0.00">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-xs font-semibold text-gray-500">Aplica desde</label>
                                    <input id="budgetEffectiveFrom" type="month" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none">
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-gray-100 p-4">
                                <div class="flex items-center justify-between">
                                    <p class="text-xs font-bold text-gray-500 uppercase tracking-wider">Resumen</p>
                                    <p class="text-[11px] font-semibold text-gray-400" id="budgetCurrencyLabel"></p>
                                </div>
                                <div class="grid grid-cols-3 gap-3 mt-3">
                                    <div>
                                        <p class="text-[10px] text-gray-400 uppercase tracking-wider font-bold">Total</p>
                                        <p id="budgetsSummaryTotal" class="font-bold text-gray-800 text-sm">—</p>
                                    </div>
                                    <div>
                                        <p class="text-[10px] text-gray-400 uppercase tracking-wider font-bold">Asignado</p>
                                        <p id="budgetsSummaryAssigned" class="font-bold text-gray-800 text-sm">—</p>
                                    </div>
                                    <div>
                                        <p class="text-[10px] text-gray-400 uppercase tracking-wider font-bold">Disponible</p>
                                        <p id="budgetsSummaryAvailable" class="font-bold text-gray-800 text-sm">—</p>
                                    </div>
                                </div>
                                <div class="mt-3">
                                <div id="budgetsAssignedBar" class="w-full bg-gray-200 rounded-full h-2.5 flex overflow-hidden">
                                    <!-- Segments generated via JS -->
                                </div>
                            </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-gray-100 p-4 space-y-3">
                            <div class="flex items-center justify-between">
                                <p class="text-xs font-bold text-gray-500 uppercase tracking-wider">Subpresupuestos</p>
                                <input id="editingSubBudgetId" type="hidden">
                            </div>
                            <div class="grid grid-cols-1 gap-3">
                                <div class="space-y-1">
                                    <label class="text-xs font-semibold text-gray-500">Categoría de gasto</label>
                                    <select id="budgetCategorySelect" class="w-full bg-gray-100 border border-gray-200 rounded-lg p-2 text-sm" required></select>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="space-y-1">
                                        <label class="text-xs font-semibold text-gray-500">Monto mensual</label>
                                        <input id="budgetCategoryAmount" type="number" inputmode="decimal" min="0" step="0.01" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="0.00">
                                    </div>
                                    <div class="flex items-end gap-2">
                                        <button id="saveSubBudgetBtn" class="flex-1 py-2 text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition shadow-md">Agregar</button>
                                        <button id="cancelSubBudgetEditBtn" class="py-2 px-3 text-sm font-semibold text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition hidden">Cancelar</button>
                                    </div>
                                </div>
                            </div>
                            <div id="budgetsSubBudgetsList" class="space-y-2"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal para Gestión de Ahorros -->
            <div id="savingsModal" class="fixed inset-0 z-50 hidden">
                <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
                <div class="relative w-full h-full sm:h-auto sm:max-w-xl mx-auto sm:mt-10 bg-white sm:rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-300">
                    <!-- Cabecera del Modal -->
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-indigo-100 rounded-lg text-indigo-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3.5 9.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"></path><path d="M19.5 9.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"></path><path d="M12 12a5 5 0 0 1 5 5v3H7v-3a5 5 0 0 1 5-5z"></path></svg>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg">Metas de Ahorro</h3>
                        </div>
                        <button id="closeSavingsModal" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>

                    <!-- Cuerpo del Modal -->
                    <div class="flex-grow overflow-y-auto p-6 space-y-6 custom-scrollbar">
                        <!-- Lista de Metas -->
                        <div id="savingsGoalsList" class="flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory custom-scrollbar">
                            <!-- Las metas se cargarán aquí dinámicamente -->
                            <div class="text-center py-8 w-full">
                                <p class="text-gray-400 italic">No tienes metas de ahorro configuradas.</p>
                            </div>
                        </div>

                        <!-- Formulario para Nueva Meta (Oculto por defecto) -->
                        <div id="newGoalForm" class="hidden bg-gray-50 rounded-xl p-4 border border-gray-100 space-y-4">
                            <h4 id="goalFormTitle" class="font-bold text-gray-700 text-sm uppercase tracking-wider">Nueva Meta</h4>
                            <input type="hidden" id="goalIdField">
                            <div class="grid grid-cols-1 gap-4">
                                <div class="space-y-1">
                                    <label class="text-xs font-semibold text-gray-500">Nombre de la meta</label>
                                    <input type="text" id="goalName" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Ej. Viaje a Japón">
                                </div>
                                <div class="space-y-1">
                                    <label class="text-xs font-semibold text-gray-500">Descripción (opcional, máx. 100 car.)</label>
                                    <textarea id="goalDescription" maxlength="100" rows="2" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none resize-none" placeholder="Ahorro mensual para el boleto..."></textarea>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="space-y-1">
                                        <label class="text-xs font-semibold text-gray-500">Monto Objetivo</label>
                                        <input type="number" id="goalTarget" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="0.00">
                                    </div>
                                    <div class="space-y-1">
                                        <label class="text-xs font-semibold text-gray-500">Monto Inicial</label>
                                        <input type="number" id="goalCurrent" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="0.00" value="0">
                                    </div>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="flex-grow space-y-1">
                                        <label class="text-xs font-semibold text-gray-500">Color distintivo</label>
                                        <div class="flex flex-wrap gap-2">
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-indigo-500 ring-2 ring-offset-2 ring-indigo-500" data-color="indigo"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-blue-500" data-color="blue"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-cyan-500" data-color="cyan"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-teal-500" data-color="teal"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-green-500" data-color="green"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-amber-500" data-color="amber"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-orange-500" data-color="orange"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-rose-500" data-color="rose"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-purple-500" data-color="purple"></button>
                                            <button type="button" class="color-opt w-6 h-6 rounded-full bg-slate-500" data-color="slate"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex gap-2 pt-2">
                                <button id="cancelGoal" class="flex-grow py-2 text-sm font-semibold text-gray-500 hover:bg-gray-200 rounded-lg transition">Cancelar</button>
                                <button id="saveGoal" class="flex-grow py-2 text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition shadow-md">Guardar Meta</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pie del Modal -->
                    <div class="p-4 border-t border-gray-100 bg-white">
                        <button id="showNewGoalForm" class="w-full flex items-center justify-center gap-2 py-3 bg-indigo-50 text-indigo-700 font-bold rounded-xl hover:bg-indigo-100 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            Agregar Nueva Meta
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal para Configuración de Webhook -->
            <div id="webhookModal" class="fixed inset-0 z-[70] hidden">
                <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
                <div class="relative w-full max-w-md mx-auto mt-20 bg-white rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-indigo-100 rounded-lg text-indigo-600">
                                <i class="fa-brands fa-discord fa-lg"></i>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg">Webhook de Discord</h3>
                        </div>
                        <button id="closeWebhookModal" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Configura un Webhook de Discord para enviar respaldos automáticos a un canal específico.
                        </p>
                        <div class="space-y-2">
                            <label for="discordWebhookInput" class="block text-xs font-bold text-gray-500 uppercase tracking-wider">URL del Webhook</label>
                            <div class="relative">
                                <input id="discordWebhookInput" type="password" data-pref-key="fti-discord-webhook-url" class="w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-all" placeholder="https://discord.com/api/webhooks/...">
                                <button id="toggleWebhookVisibility" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-open"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-col gap-2 pt-2">
                            <button id="saveWebhookButton" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200">
                                Guardar Configuración
                            </button>
                            <button id="deleteWebhookButton" class="w-full bg-red-50 text-red-600 font-semibold py-3 rounded-xl hover:bg-red-100 transition">
                                Eliminar Webhook
                            </button>
                        </div>
                        <p class="text-[11px] text-gray-400 text-center italic">
                            * La URL se almacena localmente y se incluye en tus archivos de exportación.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Modal para Historial de Metas -->
            <div id="historyModal" class="fixed inset-0 z-[70] hidden">
                <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>
                <div class="relative w-full max-w-md mx-auto mt-20 bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[70vh] animate-in fade-in zoom-in duration-200">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <div class="flex items-center gap-3">
                            <div id="historyModalIcon" class="p-2 bg-indigo-100 rounded-lg text-indigo-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                            </div>
                            <div>
                                <h3 id="historyModalTitle" class="font-bold text-gray-800 text-lg">Historial de Meta</h3>
                                <p id="historyModalSubtitle" class="text-[10px] text-gray-400 uppercase tracking-widest font-bold"></p>
                            </div>
                        </div>
                        <button id="closeHistoryModal" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>
                    <div id="historyList" class="flex-grow min-h-0 overflow-y-auto p-6 space-y-4">
                        <!-- Los items del historial se cargarán aquí -->
                    </div>
                </div>
            </div>
            </section>

             <!-- Sección de Acerca de -->
            <section>
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Acerca de</h2>
                <p class="text-sm text-gray-500 mb-4">Información de la plataforma.</p>
                <div class="bg-white rounded-lg border border-gray-200 divide-y divide-gray-200">
                    <a href="#" class="flex justify-between items-center p-4 hover:bg-gray-50 transition-colors">
                        <div>
                            <p class="font-medium text-gray-800">Versión de la Plataforma</p>
                            <p class="text-sm text-gray-500"><span id="platformVersion">Cargando...</span></p>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </a>
                    <!-- Tarjeta informativa de la última actualización -->
                    <div class="flex justify-between items-center p-4">
                        <div>
                            <p class="font-medium text-gray-800">Última actualización</p>
                            <p class="text-sm text-gray-500"><span id="platformLastUpdate">Cargando...</span></p>
                        </div>
                    </div>
                </div>
            </section>

        </div>

        <br><br>

        <!-- Barra de Navegación Inferior -->
        <footer class="fixed bottom-0 left-0 right-0 max-w-2xl mx-auto bg-white border-t border-gray-200">
            <div class="grid grid-cols-5 items-center justify-items-center h-16">
                <!-- Resumen -->
                <a href="resumen.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span class="text-xs font-medium">Resumen</span>
                </a>
                <!-- Operaciones -->
                <a href="operaciones.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                    <span class="text-xs font-medium">Operaciones</span>
                </a>
                <!-- Estadísticas -->
                <a href="estadisticas.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
                    <span class="text-xs font-medium">Estadísticas</span>
                </a>
                <!-- Cuentas -->
                <a href="cuentas.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path></svg>
                    <span class="text-xs font-medium">Cuentas</span>
                </a>
                <!-- Ajustes (Activo) -->
                 <a href="#" class="flex flex-col items-center justify-center text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                    <span class="text-xs font-medium">Ajustes</span>
                </a>
            </div>
        </footer>
    </div>

    <script src="../app.js"></script>
    <script>
        (function syncPlatformMetadata() {
            const versionElement = document.getElementById('platformVersion');
            const lastUpdateElement = document.getElementById('platformLastUpdate');

            if (versionElement && typeof window.PAGE_VERSION !== 'undefined') {
                versionElement.textContent = window.PAGE_VERSION;
            }

            if (lastUpdateElement && typeof window.ACT_DATE !== 'undefined') {
                lastUpdateElement.textContent = window.ACT_DATE;
            }
        })();
    </script>

</body>
</html>

