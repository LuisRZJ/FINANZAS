<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTI - Gestor de Finanzas | Estadísticas</title>
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" href="/pwa/logo-app.png">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="estilos.css">
    <script defer src="javascript.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilo para asegurar que el canvas se ajuste a su contenedor */
        .chart-container {
            position: relative;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex justify-center">

    <!-- Contenedor principal de la app -->
    <div class="w-full max-w-2xl bg-white shadow-lg relative min-h-screen">
        <!-- Contenido de la página con padding inferior para la barra de navegación -->
        <div class="p-4 sm:p-6 pb-24">

            <!-- Encabezado y Saludo -->
            <header class="mb-4 flex justify-between items-start">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Estadísticas</h1>
                    <p class="text-gray-500">Analiza tus finanzas en detalle.</p>
                </div>
                <!-- Menú de 3 puntos -->
                <div class="relative group">
                    <button class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                    </button>
                    <!-- Dropdown Menu -->
                    <div class="absolute right-0 w-48 pt-2 z-20 hidden group-hover:block">
                        <div class="bg-white rounded-md shadow-xl py-1">
                            <a href="/index.html" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                                Volver a inicio
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Navegación por Mes -->
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-2">
                    <button class="p-2 rounded-full hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    </button>
                    <span class="font-semibold text-lg text-gray-800">Septiembre 2025</span>
                    <button class="p-2 rounded-full hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </button>
                </div>
                <button class="flex items-center gap-1 text-sm font-medium bg-gray-100 px-3 py-2 rounded-lg hover:bg-gray-200">
                    Mensual
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
            </div>
            
            <div class="space-y-6">
                <!-- Panel de Balance General del Mes -->
                <section class="bg-gray-100 rounded-xl p-6">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-sm font-medium text-gray-500">Balance del Mes</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                    </div>
                    <p class="text-4xl sm:text-5xl font-bold text-gray-900 mb-6">$1,764.50</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="flex items-center space-x-3">
                            <div class="p-2 bg-green-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Ingresos Totales</p>
                                <p class="text-lg font-semibold text-green-600">$2,375.00</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="p-2 bg-red-100 rounded-full">
                               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-600"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Gastos Totales</p>
                                <p class="text-lg font-semibold text-red-600">$610.50</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Evolución del Balance Total -->
                <section class="bg-white rounded-xl p-4 sm:p-6 border border-gray-200">
                    <h2 class="text-lg font-bold text-gray-800 mb-4">Evolución del Balance Total</h2>
                    <div class="chart-container h-64">
                        <canvas id="balanceEvolutionChart"></canvas>
                    </div>
                </section>

                <!-- Panel de Operaciones Programadas -->
                <section class="bg-gray-50 rounded-xl p-4 sm:p-6">
                    <h2 class="text-lg font-bold text-gray-800 mb-4">Operaciones Programadas</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-4 bg-white rounded-lg shadow-sm">
                            <div>
                                <span class="font-medium text-sm text-gray-700">Ingresos Programados</span>
                                <p class="font-bold text-green-600 text-xl">$0.00</p>
                            </div>
                            <a href="#" title="Ver detalles" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </a>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-white rounded-lg shadow-sm">
                             <div>
                                <span class="font-medium text-sm text-gray-700">Gastos Programados</span>
                                <p class="font-bold text-red-600 text-xl">-$150.00</p>
                            </div>
                            <a href="#" title="Ver detalles" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </a>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-white rounded-lg shadow-sm">
                            <div>
                                <span class="font-medium text-sm text-gray-700">Transferencias Programadas</span>
                                <p class="font-bold text-indigo-600 text-xl">-$500.00</p>
                            </div>
                             <a href="#" title="Ver detalles" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><polyline points="9 18 15 12 9 6"></polyline></svg>
                            </a>
                        </div>
                    </div>
                </section>
                
                <!-- Gráfico Mensual Ingresos vs Gastos -->
                <section class="bg-white rounded-xl p-4 sm:p-6 border border-gray-200">
                     <h2 class="text-lg font-bold text-gray-800 mb-4">Flujo Mensual</h2>
                     <div class="chart-container h-72">
                        <canvas id="monthlyFlowChart"></canvas>
                    </div>
                </section>

                <!-- Distribución de Ingresos por Categoría -->
                <section class="bg-white rounded-xl p-4 sm:p-6 border border-gray-200">
                    <h2 class="text-lg font-bold text-gray-800 mb-4">Distribución de Ingresos</h2>
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 items-center">
                        <div class="chart-container h-48 w-48 mx-auto">
                            <canvas id="incomeChart"></canvas>
                        </div>
                        <div class="text-sm space-y-3">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-green-500"></span>
                                    <span>Salario</span>
                                </div>
                                <span class="font-semibold">94.7%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-blue-500"></span>
                                    <span>Ventas</span>
                                </div>
                                <span class="font-semibold">4.2%</span>
                            </div>
                             <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-indigo-500"></span>
                                    <span>Otros</span>
                                </div>
                                <span class="font-semibold">1.1%</span>
                            </div>
                        </div>
                    </div>
                    <!-- Promedios de Ingresos -->
                    <div class="grid grid-cols-2 gap-4 mt-6 pt-6 border-t">
                        <div class="text-center">
                            <p class="text-sm text-gray-500">Ganancia Diaria Promedio</p>
                            <p class="font-bold text-green-600 text-lg">$58.82</p>
                        </div>
                        <div class="text-center">
                            <p class="text-sm text-gray-500">Ganancia Semanal Promedio</p>
                            <p class="font-bold text-green-600 text-lg">$411.74</p>
                        </div>
                    </div>
                </section>

                <!-- Distribución de Gastos por Categoría -->
                <section class="bg-white rounded-xl p-4 sm:p-6 border border-gray-200">
                    <h2 class="text-lg font-bold text-gray-800 mb-4">Distribución de Gastos</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 items-center">
                        <div class="chart-container h-48 w-48 mx-auto">
                            <canvas id="expenseChart"></canvas>
                        </div>
                        <div class="text-sm space-y-3">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-red-500"></span>
                                    <span>Supermercado</span>
                                </div>
                                <span class="font-semibold">14.0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-amber-500"></span>
                                    <span>Comida</span>
                                </div>
                                <span class="font-semibold">4.1%</span>
                            </div>
                             <div class="flex justify-between items-center">
                                <div class="flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-purple-500"></span>
                                    <span>Transferencias</span>
                                </div>
                                <span class="font-semibold">81.9%</span>
                            </div>
                        </div>
                    </div>
                    <!-- Promedios de Gastos -->
                     <div class="grid grid-cols-2 gap-4 mt-6 pt-6 border-t">
                        <div class="text-center">
                            <p class="text-sm text-gray-500">Gasto Diario Promedio</p>
                            <p class="font-bold text-red-600 text-lg">-$20.35</p>
                        </div>
                        <div class="text-center">
                            <p class="text-sm text-gray-500">Gasto Semanal Promedio</p>
                            <p class="font-bold text-red-600 text-lg">-$142.45</p>
                        </div>
                    </div>
                </section>

            </div>

        </div>

        <!-- Barra de Navegación Inferior -->
        <footer class="fixed bottom-0 left-0 right-0 max-w-2xl mx-auto bg-white border-t border-gray-200">
            <div class="grid grid-cols-5 items-center justify-items-center h-16">
                <a href="resumen.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span class="text-xs font-medium">Resumen</span>
                </a>
                <a href="operaciones.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                    <span class="text-xs font-medium">Operaciones</span>
                </a>
                <a href="#" class="flex flex-col items-center justify-center text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
                    <span class="text-xs font-medium">Estadísticas</span>
                </a>
                <a href="cuentas.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                   <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path></svg>
                    <span class="text-xs font-medium">Cuentas</span>
                </a>
                <a href="ajustes.html" class="flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600 w-full h-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mb-1"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                    <span class="text-xs font-medium">Ajustes</span>
                </a>
            </div>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Helper para formatear a moneda
            const formatCurrency = (value) => new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(value);

            // Gráficos de Dona (Ingresos y Gastos)
            const ctxIncome = document.getElementById('incomeChart').getContext('2d');
            const ctxExpense = document.getElementById('expenseChart').getContext('2d');
            const ctxMonthlyFlow = document.getElementById('monthlyFlowChart').getContext('2d');
            const ctxBalanceEvolution = document.getElementById('balanceEvolutionChart').getContext('2d');

            const incomeData = {
                labels: ['Salario', 'Ventas', 'Otros'],
                datasets: [{
                    label: 'Ingresos',
                    data: [2250, 100, 25],
                    backgroundColor: ['#22C55E', '#3B82F6', '#6366F1'],
                    hoverOffset: 8,
                    borderWidth: 0,
                }]
            };

            const expenseData = {
                labels: ['Supermercado', 'Comida', 'Transferencias'],
                datasets: [{
                    label: 'Gastos',
                    data: [85.50, 25, 500],
                    backgroundColor: ['#EF4444', '#F59E0B', '#8B5CF6'],
                    hoverOffset: 8,
                    borderWidth: 0,
                }]
            };
            
            // Datos para el gráfico de Flujo Mensual
            const monthlyFlowData = {
                labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'],
                datasets: [{
                    label: 'Ingresos',
                    data: [500, 1200, 300, 375],
                    backgroundColor: 'rgba(34, 197, 94, 0.8)',
                    borderColor: '#16A34A',
                    borderWidth: 2,
                    borderRadius: 6,
                }, {
                    label: 'Gastos',
                    data: [250, 400, 150, 110.50],
                    backgroundColor: 'rgba(239, 68, 68, 0.8)',
                    borderColor: '#DC2626',
                    borderWidth: 2,
                    borderRadius: 6,
                }]
            };
            
            // Datos para el gráfico de Evolución del Balance
            const balanceEvolutionData = {
                // Simula los primeros 15 días del mes
                labels: Array.from({length: 15}, (_, i) => `${i + 1} Sep`),
                datasets: [{
                    label: 'Balance Total',
                    // Simula un balance inicial de $5000 y el progreso durante el mes
                    data: [5000, 5025, 4980, 5100, 5050, 5300, 5250, 5800, 5750, 6100, 6200, 6100, 6214.5, 6129, 6764.5],
                    fill: true,
                    backgroundColor: (context) => {
                         const chart = context.chart;
                         const {ctx, chartArea} = chart;
                         if (!chartArea) return null;
                         const gradient = ctx.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
                         gradient.addColorStop(0, 'rgba(79, 70, 229, 0)');
                         gradient.addColorStop(1, 'rgba(79, 70, 229, 0.3)');
                         return gradient;
                    },
                    borderColor: '#4F46E5',
                    borderWidth: 2.5,
                    tension: 0.4, // Suaviza la línea
                    pointBackgroundColor: '#4F46E5',
                    pointRadius: 0, // Oculta los puntos por defecto
                    pointHoverRadius: 6, // Muestra puntos más grandes al pasar el mouse
                    pointHoverBorderWidth: 3,
                    pointHoverBorderColor: '#FFFFFF',
                }]
            };

            // Configuración genérica para los gráficos de Dona
            const doughnutConfig = {
                type: 'doughnut',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#111827',
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 12 },
                            padding: 10,
                            cornerRadius: 6,
                            displayColors: false,
                             callbacks: {
                                label: function(context) {
                                    const value = context.parsed;
                                    if (value === null) return '';
                                    const total = context.dataset.data.reduce((acc, data) => acc + data, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${formatCurrency(value)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            };
            
            // Configuración para el gráfico de barras
            const barConfig = {
                type: 'bar',
                data: monthlyFlowData,
                options: {
                     responsive: true,
                     maintainAspectRatio: false,
                     scales: {
                        y: {
                           beginAtZero: true,
                           grid: { display: false },
                           ticks: {
                               callback: (value) => `$${value/1000}k`
                           }
                        },
                        x: {
                            grid: { display: false }
                        }
                     },
                     plugins: {
                         legend: {
                             position: 'bottom',
                             labels: {
                                 usePointStyle: true,
                                 boxWidth: 8,
                                 padding: 20
                             }
                         },
                         tooltip: {
                             callbacks: {
                                label: (context) => `${context.dataset.label}: ${formatCurrency(context.parsed.y)}`
                             }
                         }
                     }
                }
            };

            // Configuración para el gráfico de línea
            const lineConfig = {
                type: 'line',
                data: balanceEvolutionData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            display: false, // Oculta el eje Y para un look más limpio
                            beginAtZero: false,
                        },
                        x: {
                            grid: { display: false },
                            ticks: {
                                // Muestra etiquetas solo para ciertos días para evitar aglomeración
                                callback: function(value, index, values) {
                                   const label = this.getLabelForValue(value);
                                   const day = parseInt(label.split(' ')[0]);
                                   // Muestra el primer día, el último y cada 5 días intermedios
                                   if (index === 0 || index === values.length - 1 || day % 5 === 0) {
                                       return label;
                                   }
                                   return '';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: '#111827',
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 12 },
                            padding: 12,
                            cornerRadius: 8,
                            displayColors: false,
                            callbacks: {
                                title: (tooltipItems) => tooltipItems[0].label,
                                label: (context) => formatCurrency(context.parsed.y)
                            }
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    }
                }
            };

            // Crear las instancias de los gráficos
            new Chart(ctxIncome, { ...doughnutConfig, data: incomeData });
            new Chart(ctxExpense, { ...doughnutConfig, data: expenseData });
            new Chart(ctxMonthlyFlow, barConfig);
            new Chart(ctxBalanceEvolution, lineConfig);
        });
    </script>
</body>
</html>

